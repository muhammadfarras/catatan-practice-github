# Git Tools Submodule
Catatan ini diambil dan diterjemahkan asal oleh saya melalui

* Dokumentasi resmi Git [https://git-scm.com/book/en/v2/Git-Tools-Submodules](https://git-scm.com/book/en/v2/Git-Tools-Submodules)

# Daftar isi
* [Perkenalan Submodule](#Git-Submodules)
* [Memulai Sub Module](#starting-with-submodules)

___
* [Cara menghapus submodule](#Cara-Menghapus-submodule)

# Git Submodules
Tidak jarang ketika kita mengerjakan sebuah projek kita membutuhkan sumber daya dari projek lain. Projek tersebut dapat berupa *library* atau sebuah projek yang kita kerjakan secara terspisah yang mana projek tersebut digunakan oleh lebih dari projek utama.

> Contoh : kita sedang mengerjakan projek `A`. Projek `A` tersebut digunakan sebagai sumber daya dari projek `B`, `C`, dan `D`. Seandaikanya adasebuah kondisi dimana kita diharuskan merubah kode dari projek `A` yang kita cloning, kita akan menemukan kesulitan untuk men-*deploy*, karena kita harus memastikan setiap client memiliki *library* tersebut. Masalah dengan kita meng-copy code kedalam projek kita adalah setiap perubahan yang kita buat sangat sulit untuk di merge ketika perubahan di `upstream` tersedia.

Git memiliki solusi untuk permasalah tersebut dengan `Submodules`. Submodules mengizinkan kita untuk mempertahankan repository git sebagai subdrectory dari Git Repository. Yang mana membuat kita meng-cloning repository lain kedalam projek kita dan memisahkan commits kita dengan *subdirectory* tersebut.

## Starting with submodules
Untuk menambahkan submodule baru gunakan perintah ```git submodul add``` dengan paramater alamat absolut atau alama relatif URL dari projek yang kita tuju.

Contoh kita ingin menjadikan projek `catatan-practice-github` menjadi submodule dari projek utama kita. maka kita bisa menuliskan *command* berikut didalam repository  projek utama kita.

```
git submodule add https://github.com/muhammadfarras/catatan-practice-github
```
Jika kita menjalankan `git status` maka ada 2 file yang ditambahkan :
```Github
$ git status
On branch main
Your branch is up to date with 'origin/main'.

Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
        new file:   .gitmodules
        new file:   catatan-practice-github
```
Pertama kita akan menyadari ada file `.gitmodules` yang baru ditambahkan, File ini adalah file konfigurasi yang menyimpan pemetaan antara URL dari projek dan subdirektori lokal yang baru saja kita `pulled` kedalamnya. FIle tersebut berisi ;
```github
[submodule "catatan-practice-github"]
	path = catatan-practice-github
	url = https://github.com/muhammadfarras/catatan-practice-github

```
> Jika kita memliki beberapa submodules maka akan ada beberapa bagian yang sejenis seperti diatas.

Penting untuk dicatat bahwa file ini adalah `version-controlled` dengan file yang lain, Seperti file `.gitignore`. File ini `pushed and pulled with the rest of your project`. Inilah mengapa orang lain yang meng-cloning projek kita mengetahui dari mana kita mendapatkan projek submodule tersebut berasal.

Daftar lain dari `git status` adalah folder project `catatan-practice-github`. Jika kita menajalan `git diff` makan akan mengeluarkan infomrasi sebagai berikut ;
```github
$ git diff --cached catatan-practice-github
diff --git a/catatan-practice-github b/catatan-practice-github
new file mode 160000
index 0000000..e26f3f7
--- /dev/null
+++ b/catatan-practice-github
@@ -0,0 +1 @@
+Subproject commit e26f3f70182650d52e0219cca7763a1f161e9c72
```
Meskipun `catatan-practice-github` (submodule) adalah subdirektori dari projek yang sedang kita kerjakan, namun **Git** memandangnya sebagai submodule dan tidak melacak isi konten ketika kita tidak berada didalam direktori submodule tersebut. Namun **Git menganggapnya sebagai sebuah *commit* tertentu dari repositori tersebut.


## Cara menghapus Submodule
Untuk menghapus sampai ke akar dari submodule ada beberapa langkah yang harus dilakukan. 
1. Buka file dengan nama `.gitmodules`, lalu hapus baris-baris kata yang berhubungan dengan submodule.
2. Stage `.gitmodules` file dengan cara mengetikan command 
```
git add .gitmodules
```
3. Menghapus beberapa bagian dari baris-baris kata didalam file `.git/config`

4. Hilangkan file submodule dari *working tree & inde*
```
git rm --cached alamat_submodule
```
5. Hilangkah folder direktori `.git` submodule
kita dapat menghapusnya secara manual dari folder `.git/submodule/submodule_yang_ingin_dihapus` atau bisa gunakan perintah
```
rm -r -f .git/modules/alamat_submodule
```
6. Lakukan perubahan dengan perintah
```
git commit -m "Removed submodule"
```
7. Hapus submdoule file yang sudah tidak terlacak
Kita bisa menghapus secara langsung atau bisa gunakan perintah
```
rm -r -f alamat_submodule
```
Refrensi : [https://gist.github.com/myusuf3/7f645819ded92bda6677#file-delete_git_submodule-md](https://gist.github.com/myusuf3/7f645819ded92bda6677#file-delete_git_submodule-md)